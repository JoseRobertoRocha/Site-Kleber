<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Certificados — Kleber S. Lago</title>
  <meta name="description" content="Certificados e formações de Kleber S. Lago." />
  <meta name="theme-color" content="#091026" />

  <!-- Fonte -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- Preload (opcional) -->
  <link rel="preload" href="./assets/img/Design-sem-nome.png" as="image" />

  <!--------------------------------------------- CSS ---------------------------------------->
  <style>
    :root{
  color-scheme: dark;
  --bg1:#04121a; --bg2:#04121a; --fg:#ffffff;
  --c1:#00c6ff; --c2:#0066ff;
  --muted:#a9b0c0;
  --glass:rgba(255,255,255,.06);
  --radius:14px;
  --wrap: 1100px;
  --ratio-desktop: 16/9;
  --ratio-tablet:  4/3;
  --ratio-phone:   3/4;
  --ratio: 16/9;
}

/* Base */
*{box-sizing:border-box}
html,body{
  margin:0;
  color:var(--fg);
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background: var(--bg1);
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
  text-align: center;
  line-height:1.6;
  overflow-x:hidden;
}
.wrap{ max-width:min(var(--wrap), 96vw); margin:auto; padding:24px }
a{ color:inherit }

h1,h2,h3,h4{ margin:0 0 .5rem; line-height:1.25; text-align:center }
p,li{ margin:0 0 .75rem }
.muted-blurb{ opacity:.85 }

/* Header + Menu */
.site-header{
  position:sticky; top:0; z-index:40;
  backdrop-filter: blur(10px);
  border-bottom:1px solid rgba(255,255,255,.08);
  transform:translateZ(0);
  background: rgba(4,18,26,.45);
}
.nav-row{ display:flex; align-items:center; justify-content:space-between; gap:14px }
.brand{ display:flex; align-items:center; gap:10px; text-decoration:none }
.logo{
  width:42px; height:42px; border-radius:12px;
  display:grid; place-items:center; font-weight:900;
  background:linear-gradient(135deg,var(--c1),var(--c2));
  box-shadow:0 0 18px rgba(0,102,255,.35);
}
.t{ font-weight:800; line-height:1 }
.s{ opacity:.8; font-size:.9rem }

.nav-links{
  display:flex; align-items:center; gap:10px; flex-wrap:wrap;
}
.nav-links a{
  text-decoration:none; padding:10px 12px; border-radius:10px;
  border:1px solid transparent;
  transition:background .2s ease, border-color .2s ease, transform .2s ease, box-shadow .2s ease;
  white-space:nowrap;
}
.nav-links a:hover{
  background:rgba(255,255,255,.06);
  border-color:rgba(255,255,255,.12);
}
.nav-links a:focus-visible{
  outline:3px solid color-mix(in srgb, var(--c2) 65%, white 35%);
  outline-offset:2px;
}
.cta-btn{
  background:linear-gradient(90deg,var(--c1),var(--c2));
  font-weight:800; border-color:transparent;
  box-shadow:0 10px 28px rgba(0,0,0,.35);
}

/* Hamburguer */
.menu-toggle{
  display:none; width:44px; height:44px; border:none; background:transparent; cursor:pointer; border-radius:10px;
  position:relative;
}
.menu-toggle:hover{ background:rgba(255,255,255,.08) }
.menu-toggle .line{
  position:absolute; left:10px; right:10px; height:2px; background:#fff; border-radius:2px; transition:.25s;
}
.menu-toggle .line:nth-child(1){ top:14px }
.menu-toggle .line:nth-child(2){ top:21px }
.menu-toggle .line:nth-child(3){ top:28px }
html.nav-open .menu-toggle .line:nth-child(1){ top:21px; transform:rotate(45deg) }
html.nav-open .menu-toggle .line:nth-child(2){ opacity:0 }
html.nav-open .menu-toggle .line:nth-child(3){ top:21px; transform:rotate(-45deg) }

/* Backdrop */
.nav-backdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.55); z-index:39;
  opacity:0; pointer-events:none; transition:opacity .28s ease;
}
.nav-backdrop[hidden]{ display:none }
html.nav-open .nav-backdrop{ opacity:1; pointer-events:auto }

/* Drawer responsivo + animação suave */
@media (max-width:980px){
  .menu-toggle{ display:inline-block }
  .nav-links{
    position:fixed; z-index:40; top:0; right:0;
    width:min(320px,88vw); height:100dvh;
    background:#0a1b38;
    border-left:1px solid rgba(255,255,255,.08);
    box-shadow:-10px 0 36px rgba(0,0,0,.45);
    padding:88px 18px 18px;
    display:flex; flex-direction:column; gap:12px;
    align-items:stretch;

    transform:translateX(100%);
    opacity:0;
    will-change:transform, opacity;
    transition:
      transform .42s cubic-bezier(.25,1.25,.5,1),
      opacity   .28s ease-out;

    contain: layout paint;
    touch-action:pan-y; overscroll-behavior:contain;
  }
  html.nav-open .nav-links{ transform:translateX(0); opacity:1; }

  .nav-links a{
    border:1px solid rgba(255,255,255,.12);
    background:rgba(255,255,255,.04);
    text-align:left;
    padding:12px;
    border-radius:10px;

    transform:translateX(8px);
    opacity:0;
    transition:
      transform .35s cubic-bezier(.22,1,.36,1),
      opacity   .35s ease;
  }
  html.nav-open .nav-links a{ transform:translateX(0); opacity:1; }
  html.nav-open .nav-links a:nth-child(1){ transition-delay:.04s }
  html.nav-open .nav-links a:nth-child(2){ transition-delay:.08s }
  html.nav-open .nav-links a:nth-child(3){ transition-delay:.12s }
  html.nav-open .nav-links a:nth-child(4){ transition-delay:.16s }
  html.nav-open .nav-links a:nth-child(5){ transition-delay:.20s }

  .nav-links a:hover{
    background:rgba(255,255,255,.10);
    transform:translateX(4px);
  }

  .cta-btn{ border:1px solid transparent }
}

/* Hero / Títulos */
.hero{ padding:40px 0 8px }
.section-title{
  margin:0 0 8px; font-size:clamp(22px,3.6vw,36px);
  background:linear-gradient(90deg,var(--c1),var(--c2));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
}

/* Cards */
.content{ padding:10px 0 30px }
.cards-grid{
  display:grid; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); gap:16px;
}
.card{
  position:relative; border-radius:var(--radius); overflow:hidden;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  transition:.22s ease;
  display:flex; flex-direction:column;
}
.card:hover{
  transform: translateY(-3px);
  box-shadow:0 12px 30px rgba(0,0,0,.35), 0 0 24px rgba(0,114,255,.28);
  border-color: rgba(0,198,255,.45);
}
.tag{
  position:absolute; top:10px; left:10px; padding:6px 10px; border-radius:999px;
  background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.16);
  font-size:.82rem; font-weight:800
}
.card-body{ padding:18px 16px 10px; text-align:left; flex:1; }
.card-body h4{ margin:0 0 6px; font-size:1.05rem; }
.card-body p{ margin:0; opacity:.9; }
.card-actions{
  display:flex; gap:8px; padding:0 16px 16px 16px; flex-wrap:wrap;
  margin-top:auto; justify-content:flex-start;
}

.btn-primary{
  appearance:none; border:none; cursor:pointer;
  padding:10px 12px; border-radius:10px; font-weight:800; color:var(--fg);
  background: linear-gradient(90deg,var(--c1),var(--c2));
}
.btn-outline{
  text-decoration:none; padding:10px 12px; border-radius:10px; font-weight:700; color:var(--fg);
  border:1px solid rgba(255,255,255,.18); background:transparent;
}
.btn-outline:hover{ background:rgba(255,255,255,.06) }
.btn-primary:hover{ filter:saturate(1.1) brightness(1.04) }

/* Contato */
.contact-grid{
  display:grid; grid-template-columns:1.2fr .8fr; gap:16px; align-items:start;
}
.contact-card{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  border-radius:var(--radius);
  padding:18px;
}
.contact-list{ margin:10px 0 0; padding-left:18px }
.contact-actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px }

@media (max-width:900px){
  .contact-grid{ grid-template-columns:1fr }
}

/* Footer */
footer{ padding:24px 0; border-top:1px solid rgba(255,255,255,.08) }
.footer-row{
  display:flex; align-items:center; justify-content:space-between; gap:16px;
}
.small{ font-size:.9rem }
.muted{ opacity:.8 }

/* Modal */
.modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:50;
  background:rgba(0,0,0,.75);
}
.modal.show{ display:flex }
.modal-card{
  width:min(980px,94vw);
  background:rgba(10,20,40,.92);
  border:1px solid rgba(255,255,255,.12);
  border-radius:16px; overflow:hidden;
  box-shadow:0 0 36px rgba(0,114,255,.32);
  position:relative;
}
.modal-close{
  position:absolute; right:12px; top:10px;
  background:transparent; border:1px solid rgba(255,255,255,.18); color:#fff;
  border-radius:10px; padding:8px 10px; cursor:pointer;
}
.modal-close:hover{ background:rgba(255,255,255,.08) }
#modalContent{ padding:18px }

/* Mídia com proporção fluida */
.media-box,
.cert-media{
  aspect-ratio: var(--ratio);
  background:
    radial-gradient(80% 80% at 10% 10%, rgba(0,198,255,.18), transparent),
    radial-gradient(80% 80% at 90% 20%, rgba(0,102,255,.18), transparent),
    linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.10); border-radius:12px; overflow:hidden;
  display:flex; align-items:center; justify-content:center; color:#fff; font-size:48px;
}
.media-box > img,
.media-box > iframe,
.media-box > video,
.cert-media > img,
.cert-media > iframe,
.cert-media > video{
  width:100%; height:100%; object-fit:cover; display:block; aspect-ratio:inherit;
}

/* Proporção ativa por breakpoint */
@media (max-width:980px){
  :root{ --ratio: var(--ratio-tablet) }
  .wrap{ max-width:min(1000px, 96vw) }
}
@media (max-width:640px){
  :root{ --ratio: var(--ratio-phone) }
  .wrap{ max-width:min(680px, 94vw); padding:18px }
}

/* Acessibilidade */
:focus-visible{ outline:3px solid rgba(0,198,255,.6); outline-offset:2px }
@media (prefers-reduced-motion: reduce){
  *{ animation:none !important; transition:none !important }
}

/* WhatsApp CTA */
.wa-cta{ display:flex; flex-direction:column; align-items:center; gap:10px; margin-top:16px }
.wa-btn{
  position:relative; display:inline-flex; align-items:center; gap:10px;
  padding:14px 18px; border-radius:14px;
  background:linear-gradient(90deg,var(--c1),var(--c2)); color:#04121a;
  font-weight:800; border:0; cursor:pointer;
  box-shadow:0 12px 32px rgba(0,0,0,.35);
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
}
.wa-btn:hover{ transform:translateY(-2px); box-shadow:0 16px 40px rgba(0,0,0,.45) }
.wa-btn:active{ transform:translateY(0); filter:brightness(.98) }
.wa-glow{
  position:absolute; inset:-8px; border-radius:18px;
  background: radial-gradient(60% 60% at 50% 50%, rgba(0,198,255,.35), rgba(0,114,255,0));
  filter: blur(8px); animation: waPulse 2.2s ease-in-out infinite; z-index:-1;
}
@keyframes waPulse{ 0%,100%{ opacity:.55; transform:scale(.98) } 50%{ opacity:1; transform:scale(1.02) } }
.wa-icon{ display:inline-flex; line-height:0 }
.wa-icon svg{ display:block }
.wa-btn:hover .wa-icon{ animation: waFloat 1.2s ease-in-out infinite }
@keyframes waFloat{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-2px) } }
.wa-ripple{
  position:absolute; border-radius:999px; pointer-events:none;
  width:10px; height:10px; background:rgba(255,255,255,.55);
  transform:translate(-50%,-50%) scale(1);
  opacity:.55; filter: blur(.5px);
  animation: waRipple .55s ease-out forwards;
  mix-blend-mode: screen;
}
@keyframes waRipple{ to { transform:translate(-50%,-50%) scale(14); opacity:0 } }
.wa-tip{ min-height: 1.2em }
[data-observe].in-view .wa-btn{ animation: waPop .38s cubic-bezier(.2,.8,.2,1) both }
@keyframes waPop{ from{ transform: scale(.96) translateY(2px); opacity:0 } to{ transform: scale(1) translateY(0); opacity:1 } }

/* <details> animado (se usar) */
.case-details{
  border:1px solid rgba(255,255,255,0.08);
  border-radius:12px;
  background:rgba(255,255,255,0.03);
  overflow:hidden;
}
.case-details summary{
  list-style:none; cursor:pointer; padding:10px 12px; user-select:none; outline:none;
}
.case-details summary::-webkit-details-marker{ display:none; }
.case-details summary::after{
  content:"▾"; margin-left:10px; display:inline-block;
  transform:translateY(1px) rotate(0deg); transition: transform .25s ease;
}
.case-details[open] summary::after{ transform:translateY(1px) rotate(180deg); }
.case-details .details-body{
  overflow:hidden; padding:0 12px 12px;
  transition: height .28s ease;
}
.case-details .details-body > *{
  opacity:0; transform:translateY(-4px);
  transition: opacity .25s ease, transform .25s ease;
}
.case-details[open] .details-body > *{
  opacity:1; transform:translateY(0);
}

/* Centralizar a seção de contato */
.contact-grid {
  display: flex;
  justify-content: center;  /* Centraliza na horizontal */
  align-items: center;      /* Centraliza na vertical (se a altura for definida) */
  flex-direction: column;   /* Mantém os elementos em coluna */
  min-height: 300px;        /* altura mínima para dar respiro */
  text-align: center;       /* centraliza o texto */
}

/* Ajuste no card */
.contact-card {
  background: rgba(255, 255, 255, 0.05); /* fundo levemente translúcido */
  padding: 2rem;
  border-radius: 14px;
  max-width: 500px;
  width: 100%;
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
}

.hero {
  display: flex;
  justify-content: center;   /* Centraliza horizontalmente */
  align-items: center;       /* Centraliza verticalmente */
  text-align: center;        /* Centraliza texto */
  padding: 2rem;
}

.hero .wrap {
  max-width: 900px;
  margin: 0 auto;
}
  </style>

</head>
<body>

  <!-- HEADER -->
  <header aria-label="Cabeçalho principal" class="site-header">
    <div class="nav-row wrap">
      <a class="brand" href="./index.html">
        <div class="logo" aria-hidden="true">KS</div>
        <div>
          <div class="t">Kleber S. Lago</div>
          <div class="s">Marketing & Conteúdo</div>
        </div>
      </a>

      <nav id="site-nav" class="nav-links" aria-label="Menu principal">
        <a href="index.html">Início</a>
        <a href="projetos.html">Projetos</a>
        <a class="cta-btn" href="Curriculo/CV Kleber Lago.pdf" download="Kleber_S_Lago_CV.pdf">Currículo</a>
      </nav>

      <button id="menuToggle" class="menu-toggle" aria-expanded="false" aria-label="Abrir menu" aria-controls="site-nav">
        <span class="line"></span><span class="line"></span><span class="line"></span>
      </button>
    </div>
    <div id="navBackdrop" class="nav-backdrop" hidden></div>
  </header>

  <!-- HERO -->
  <main class="hero" role="main">
    <div class="wrap">
      <h1 class="section-title" style="margin-top:0">Certificados & Formações</h1>
      <br>
      <p class="muted-blurb" style="max-width:800px">
        Seleção de formações e certificações relevantes para Marketing, Conteúdo e Gestão de Campanhas.
      </p>
    </div>
  </main>

  <!-- LISTA DE CERTIFICADOS -->
  <section class="content wrap" aria-labelledby="certs-title">
    <h2 id="certs-title" class="section-title">Galeria de Certificados</h2>
    <br>

    <div class="cards-grid" role="list">
      <!-- CARD 1 -->
      <article class="card" role="listitem">
        <div class="tag">Conclusão</div><br><br>
        <div class="card-body">
          <h4>Faculdade de Comunicação e Marketing</h4>
          <p>Planejamento e otimização de campanhas, testes A/B, mensuração e atribuição.</p>
        </div>
        <div class="card-actions">
          <a class="btn-outline" href="Stilo da Pag-Certificado/imgs/certificates/WhatsApp Image 2025-08-13 at 14.11.40.jpeg" target="_blank" rel="noopener">Ver PDF</a>
          <a class="btn-outline" href="Stilo da Pag-Certificado/imgs/certificates/WhatsApp Image 2025-08-13 at 14.11.40.jpeg" download>Baixar</a>
        </div>
      </article>

      <!-- CARD 2 -->
      <article class="card" role="listitem">
        <div class="tag">Google ADS</div><br><br>
        <div class="card-body">
          <h4>Google Ads</h4>
          <p>Métricas, eventos, funis e análise de desempenho com foco em ROI.</p>
        </div>
        <div class="card-actions">
          <a class="btn-outline" href="Stilo da Pag-Certificado/imgs/certificates/Google Ads.pdf" target="_blank" rel="noopener">Ver PDF</a>
          <a class="btn-outline" href="Stilo da Pag-Certificado/imgs/certificates/Google Ads.pdf" download>Baixar</a>
        </div>
      </article>

      <!-- CARD 3 -->
      <article class="card" role="listitem">
        <div class="tag">Instagram Ads</div><br><br>
        <div class="card-body">
          <h4>Content Marketing Certification</h4>
          <p>Estratégia de conteúdo, SEO on-page e nutrição de leads.</p>
        </div>
        <div class="card-actions">
          <a class="btn-outline" href="Stilo da Pag-Certificado/imgs/certificates/Instagram Ads.pdf" target="_blank" rel="noopener">Ver PDF</a>
          <a class="btn-outline" href="Stilo da Pag-Certificado/imgs/certificates/Instagram Ads.pdf" download>Baixar</a>
        </div>
      </article>

      <!-- CARD 4 -->
      <article class="card" role="listitem">
        <div class="tag">Facebook ADS</div><br><br>
        <div class="card-body">
          <h4>Marketing Strategy</h4>
          <p>Posicionamento, proposta de valor e growth alavancado por dados.</p>
        </div>
        <div class="card-actions">
          <a class="btn-outline" href="Stilo da Pag-Certificado/imgs/certificates/facebook marketing.pdf" target="_blank" rel="noopener">Ver PDF</a>
          <a class="btn-outline" href="Stilo da Pag-Certificado/imgs/certificates/facebook marketing.pdf" download>Baixar</a>
        </div>
      </article>

      <!-- CARD 5 (estava fora da grid — agora dentro) -->
      <article class="card" role="listitem">
        <div class="tag">YouTube</div><br><br>
        <div class="card-body">
          <h4>Marketing Strategy</h4>
          <p>Posicionamento, proposta de valor e growth alavancado por dados.</p>
        </div>
        <div class="card-actions">
          <a class="btn-outline" href="Stilo da Pag-Certificado/imgs/certificates/YouTuber.pdf" target="_blank" rel="noopener">Ver PDF</a>
          <a class="btn-outline" href="Stilo da Pag-Certificado/imgs/certificates/YouTuber.pdf" download>Baixar</a>
        </div>
      </article>
    </div>
  </section>

  <!-- CONTATO -->
  <section id="contact" class="content wrap" aria-labelledby="contact-title">
    <h2 class="section-title" id="contact-title">Contato</h2>

    <div class="contact-grid">
      <div class="contact-card" role="region" aria-label="Informações de contato">
        <h3>Vamos conversar?</h3>
        <p class="muted">Consultoria, projetos ou contratações — respondo rápido pelo WhatsApp.</p>

        <ul class="contact-list">
        <strong>Email:</strong> <a href="mailto:contato@kleberlago.com.br">contato@kleberlago.com.br</a>
        </ul>

        <!-- CTA animado -->
        <div class="wa-cta" data-observe>
          <button
            class="wa-btn"
            type="button"
            id="waCta"
            aria-label="Abrir conversa no WhatsApp"
            data-phone="5511973367068"
            data-text="Olá, Kleber! Vim pelo site e gostaria de falar sobre consultoria/marketing. Podemos conversar?"
          >
            <span class="wa-glow" aria-hidden="true"></span>
            <span class="wa-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" focusable="false" aria-hidden="true">
                <path d="M20.52 3.48A11.8 11.8 0 0 0 12.04 0C5.62 0 .41 5.2.41 11.62c0 2.05.53 4.06 1.54 5.83L0 24l6.75-1.93a11.6 11.6 0 0 0 5.28 1.33h.01c6.42 0 11.63-5.21 11.63-11.62 0-3.1-1.21-6.02-3.42-8.3ZM12.04 21.2a9.56 9.56 0 0 1-4.88-1.34l-.35-.21-4 .98.99-3.9-.23-.36a9.57 9.57 0 1 1 8.47 4.83Zm5.57-7.13c-.3-.15-1.77-.87-2.05-.97-.28-.1-.48-.15-.68.15-.2.3-.78.97-.96 1.17-.18.2-.35.22-.65.07-.3-.15-1.27-.47-2.42-1.5-.89-.79-1.49-1.77-1.67-2.07-.18-.3-.02-.47.13-.62.13-.13.3-.35.45-.52.15-.17.2-.3.3-.5.1-.2.05-.37-.03-.52-.08-.15-.68-1.62-.93-2.23-.24-.58-.5-.5-.68-.5h-.57c-.2 0-.52.08-.8.37-.28.3-1.05 1.02-1.05 2.5s1.08 2.9 1.23 3.1c.15.2 2.13 3.25 5.16 4.56.72.31 1.28.49 1.72.62.72.23 1.38.2 1.9.12.58-.09 1.77-.72 2.02-1.42.25-.7.25-1.3.17-1.42-.07-.12-.27-.2-.57-.35Z"/>
              </svg>
            </span>
            <span class="wa-label">Falar no WhatsApp</span>
          </button>
          <div class="wa-tip muted small" aria-live="polite"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="wrap">
      <div class="footer-row">
        <div>
          <strong>Kleber S. Lago</strong>
          <div class="muted small">Marketing & Conteúdo • © <span id="year"></span></div>
        </div>
        <div class="muted small">
          Links:
          <a href="https://www.instagram.com/klesalles/" target="_blank" rel="noopener">@klesalles</a> •
          <a href="https://www.linkedin.com/in/kleber-s-lago/" target="_blank" rel="noopener">LinkedIn</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- MODAL -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card" role="document">
      <button class="modal-close" aria-label="Fechar modal" id="modalClose">Fechar ✕</button>
      <div id="modalContent"></div>
    </div>
  </div>

  <!-- JS -->
  <!-- Ajuste o caminho abaixo para o seu projeto -->
  <script>
const $  = (s, root=document) => root.querySelector(s);
const $$ = (s, root=document) => root.querySelectorAll(s);
const on = (el, ev, fn, opts) => el && el.addEventListener(ev, fn, opts);

// =========================
// Menu dinâmico (drawer)
// =========================
const html        = document.documentElement;
const menuToggle  = $("#menuToggle");
const navBackdrop = $("#navBackdrop");
const siteNav     = $("#site-nav");
const DESKTOP_BP  = 980;

if (siteNav) {
  siteNav.setAttribute("role", siteNav.getAttribute("role") || "navigation");
  siteNav.setAttribute("tabindex", "-1");
}

let prevScrollY = 0;
let restoreBodyPadding = "";

function lockScroll(){
  const scrollBarW = window.innerWidth - document.documentElement.clientWidth;
  restoreBodyPadding = document.body.style.paddingRight;
  if (scrollBarW > 0) document.body.style.paddingRight = `${scrollBarW}px`;
  prevScrollY = window.scrollY;
  document.body.style.top = `-${prevScrollY}px`;
  document.body.style.position = "fixed";
  document.body.style.width = "100%";
}
function unlockScroll(){
  document.body.style.position = "";
  document.body.style.top = "";
  document.body.style.width = "";
  document.body.style.paddingRight = restoreBodyPadding || "";
  window.scrollTo(0, prevScrollY || 0);
}
const isMenuOpen = () => html.classList.contains("nav-open");

function openMenu(){
  if (!menuToggle || !siteNav) return;
  html.classList.add("nav-open");
  menuToggle.setAttribute("aria-expanded","true");
  if (navBackdrop) navBackdrop.hidden = false;
  lockScroll();
  siteNav.focus();
}
function closeMenu(){
  if (!menuToggle || !siteNav) return;
  html.classList.remove("nav-open");
  menuToggle.setAttribute("aria-expanded","false");
  if (navBackdrop) navBackdrop.hidden = true;
  unlockScroll();
  menuToggle.focus();
}

// Toggle
on(menuToggle, "click", ()=> isMenuOpen() ? closeMenu() : openMenu());

// Fecha ao clicar no backdrop
on(navBackdrop, "click", closeMenu);

// Fecha ao clicar em qualquer link do menu
$$("#site-nav a").forEach(a => on(a, "click", closeMenu));

// Fecha com ESC
on(document, "keydown", (e)=>{ if (e.key === "Escape" && isMenuOpen()) closeMenu(); });

// Fecha ao redimensionar para desktop (debounce leve)
let resizeT;
on(window, "resize", ()=>{
  clearTimeout(resizeT);
  resizeT = setTimeout(()=>{
    if (window.innerWidth > DESKTOP_BP && isMenuOpen()) closeMenu();
  }, 120);
});

// Fecha ao clicar fora
on(document, "pointerdown", (e)=>{
  if (!isMenuOpen()) return;
  if (siteNav?.contains(e.target)) return;
  if (menuToggle?.contains(e.target)) return;
  closeMenu();
});

// Swipe para fechar (mobile)
let touchStartX = null, touchStartY = null;
on(siteNav, "touchstart", (e)=>{
  const t = e.touches[0];
  touchStartX = t.clientX; touchStartY = t.clientY;
}, {passive:true});
on(siteNav, "touchmove", (e)=>{
  if (touchStartX == null) return;
  const t = e.touches[0];
  const dx = t.clientX - touchStartX;
  const dy = t.clientY - touchStartY;
  if (Math.abs(dx) > 40 && Math.abs(dy) < 30 && dx > 0) {
    closeMenu();
    touchStartX = touchStartY = null;
  }
}, {passive:true});
on(siteNav, "touchend", ()=>{ touchStartX = touchStartY = null; });

// Focus trap simples no drawer
on(document, "keydown", (e)=>{
  if (!isMenuOpen() || e.key !== "Tab") return;
  const focusables = Array.from(siteNav.querySelectorAll([
    "a[href]",
    "button:not([disabled])",
    "textarea:not([disabled])",
    "input:not([type='hidden']):not([disabled])",
    "select:not([disabled])",
    "[tabindex]:not([tabindex='-1'])"
  ].join(",")));
  if (focusables.length === 0) return;
  const first = focusables[0];
  const last  = focusables[focusables.length - 1];
  if (e.shiftKey && document.activeElement === first) {
    e.preventDefault(); last.focus();
  } else if (!e.shiftKey && document.activeElement === last) {
    e.preventDefault(); first.focus();
  }
});

// =========================
// Footer: ano corrente
// =========================
const yearEl = $("#year");
if (yearEl) yearEl.textContent = new Date().getFullYear();

// =========================
// Modal (se usar)
// =========================
const modal        = $("#modal");
const modalClose   = $("#modalClose");
const modalContent = $("#modalContent");

function openModal(html){
  if (!modal || !modalContent) return;
  modalContent.innerHTML = html;
  modal.classList.add("show");
  modal.setAttribute("aria-hidden","false");
  lockScroll();
  modalClose?.focus();
}
function closeModal(){
  if (!modal) return;
  modal.classList.remove("show");
  modal.setAttribute("aria-hidden","true");
  unlockScroll();
}
on(modalClose, "click", closeModal);
on(modal, "click", (e)=>{ if (e.target === modal) closeModal(); });
on(document, "keydown", (e)=>{ if (e.key === "Escape" && modal?.classList.contains("show")) closeModal(); });

// =========================
// WhatsApp CTA (igual ao seu, resumido)
// =========================
(function(){
  const $cta  = document.getElementById('waCta');
  const $wrap = $cta?.closest('.wa-cta');
  const $tip  = $wrap?.querySelector('.wa-tip');
  if (!$cta || !$wrap) return;

  const obs = new IntersectionObserver(([entry])=>{
    if (entry.isIntersecting) { $wrap.classList.add('in-view'); obs.disconnect(); }
  }, { threshold: .35 });
  obs.observe($wrap);

  function ripple(e){
    const rect = $cta.getBoundingClientRect();
    const x = (e.clientX ?? (e.touches?.[0]?.clientX || 0)) - rect.left;
    const y = (e.clientY ?? (e.touches?.[0]?.clientY || 0)) - rect.top;
    const r = document.createElement('span');
    r.className = 'wa-ripple';
    r.style.left = x + 'px';
    r.style.top  = y + 'px';
    $cta.appendChild(r);
    r.addEventListener('animationend', ()=> r.remove());
  }

  const isMobile = /Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent);

  function openWA(){
    const phone = $cta.getAttribute('data-phone') || '5511973367068';
    const text  = ($cta.getAttribute('data-text') || 'Olá, quero falar sobre marketing e conteúdo!').trim();
    const msg   = encodeURIComponent(text);
    const appLink = `whatsapp://send?phone=${phone}&text=${msg}`;
    const webLink = `https://wa.me/${phone}?text=${msg}`;

    if ($tip) { $tip.textContent = 'Abrindo WhatsApp…'; setTimeout(()=> $tip.textContent = '', 2500); }
    if (isMobile) {
      const t = setTimeout(()=> { window.open(webLink, '_blank', 'noopener'); }, 500);
      window.location.href = appLink;
      setTimeout(()=> clearTimeout(t), 1200);
    } else {
      window.open(webLink, '_blank', 'noopener');
    }
  }

  on($cta, "click", (e)=>{ ripple(e); openWA(); });
  on($cta, "touchstart", (e)=>{ ripple(e); }, {passive:true});
  on($cta, "keydown", (e)=>{ if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openWA(); } });
})();
    
  </script>
</body>

</html>


